<html>
<head>
  <meta charset="UTF-8">
</head>
<body>
<h1>Test garbage collection</h1>

<div id="holder">
  <button type="button" onclick="clearArray()">Clear array</button>
</div>


<script type="text/javascript">

  let arr = []

  function createCanvas() {
    let canvas = document.createElement("CANVAS");
    canvas.width = "200"
    canvas.height = "200"
    canvas.style.width = "200px"
    canvas.style.height = "200px"
    arr.push(canvas) // this should keep the canvas element from being garbage collected
  }

  window.setInterval(() => createCanvas(), 5)

  function clearArray() {
    arr = [] // this should trigger the garbage collection for all canvas elements
  }

</script>

</body>
</html>
